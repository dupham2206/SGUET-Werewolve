var dataMember = [
    {search : "dieuquynhs9", src : "./Image/Diệu Quỳnh.png", name: "Diệu Quỳnh"},
    {search : "hoangtrungs9", src : "./Image/Hoàng Trung.jpg", name: "Hoàng Trung"},
    {search : "vanchiens9", src : "./Image/Lê Chiến.jpg", name: "Lê Chiến"},
    {search : "xuanbachs8", src : "./Image/Ngô Bách.jpg", name: "Xuân Bách"},
    {search : "thanhthaos8", src : "./Image/Thanh Thảo.jpg", name: "Thanh Thảo"},
    {search : "tramys9", src : "./Image/Trà My.jpg", name: "Trà My"},
    {search : "trunghieus8", src : "./Image/Trung Hiếuu.jpg", name: "Trung Hiếu S8"},
    {search : "trunghieus9", src : "./Image/Trung Hiếu.JPG", name: "Trung Hiếu S9"},
    {search : "vietdungs8", src : "./Image/npvd.png", name: "Việt Dũng"},
    {search : "minhhongs8", src : "./Image/lmh.png", name: "Minh Hồng"},
    {search : "minhducs9", src : "./Image/leminhduc.png", name: "Lê Minh Đức"},
    {search : "thanhtams6", src : "./Image/nguyenthanhtam.jpg", name: "Thanh Tâm"},
    {search : "congchinhs9", src : "./Image/phamcongchinh.jpg", name: "Công Chính"},
    {search : "hungcuongs9", src : "./Image/thanhungcuong.jpg", name: "Hùng Cường"},
    {search : "tuananhs7", src : "./Image/buituananh.png", name: "B.Tuấn Anh"},
    {search : "tuankiets8", src : "./Image/letuankiet.png", name: "Kiệt Phương"},
    {search : "tuananhs8", src : "./Image/ngta.png", name: "N.Tuấn Anh"},
    {search : "thienthanhs9", src : "./Image/thienthanh.png", name: "Thiên Thành"},
    {search : "thilys5", src : "./Image/lymai.png", name: "Lý Mai"},
    {search : "vietanhs9", src : "./Image/vietanh.png", name: "Việt Anh"},
    {search : "tiendungs9", src : "./Image/phamtiendung.png", name: "Dũng Phạm"},
    {search : "thuthuys8", src : "./Image/thuytran.png", name: "Thủy Trần"},
    {search : "kimthuans6", src : "./Image/vukimthuan.png", name: "Vũ Kim Thuận"},
    {search : "dinhminhs9", src : "./Image/dinhminh.png", name: "Đình Minh"},
    {search : "haianhs9", src : "./Image/haianh.png", name: "Hải Anh"},
    {search : "thitrangs8", src : "./Image/ngothitrang.png", name: "Trang Ngô"},
    {search : "duccuongs9", src : "./Image/nguyenduccuong.png", name: "Ken" },
    {search : "minhhangs9", src : "./Image/minghang.png", name: "Minh Hằng" },
    {search : "thuyduongs9", src : "./Image/thuyduong.png", name: "Thùy Dương" },
    {search : "tienthanhs7", src : "./Image/dotienthanh.png", name: "Tiến Thành" },
    {search : "thihiens8", src : "./Image/hienpham.png", name: "Hiền Phạm" },
    {search : "haiyens9", src : "./Image/haiyen.png", name: "Hải Yến" },
    {search : "manhhungs9", src : "./Image/canhung.png", name: "Cấn Hùng" },
    {search : "lamdiens8", src : "./Image/dienpham.png", name: "Điền Phạm" },
    {search : "pham thi diem quynh", src : "./Image/AvatarFinal.png", name: "Quỳnh_Team 1"},
    {search : "nguyen thi thu trang", src : "./Image/AvatarFinal.png", name: "Trang_Team 1"},
    {search : "pham xuan bach", src : "./Image/AvatarFinal.png", name: "Bách_Team 1"},
    {search : "chu quang tu", src : "./Image/AvatarFinal.png", name: "Tú_Team 1"},
    {search : "doan khanh hien", src : "./Image/AvatarFinal.png", name: "Hiển_Team 1"},
    {search : "ninh hai dang", src : "./Image/AvatarFinal.png", name: "Đăng_Team 1"},
    {search : "ngo thanh tung", src : "./Image/AvatarFinal.png", name: "Tùng_Team 1"},
    {search : "nguyen trung dung", src : "./Image/AvatarFinal.png", name: "Dũng_Team 1"},
    {search : "nguyen quoc tuan", src : "./Image/AvatarFinal.png", name: "Tuấn_Team 1"},
    {search : "pham huu trung", src : "./Image/AvatarFinal.png", name: "Trung_Team 1"},
    {search : "trinh kieu anh", src : "./Image/AvatarFinal.png", name: "Anh_Team 2"},
    {search : "tran thi hoang yen", src : "./Image/AvatarFinal.png", name: "Yến_Team 2"},
    {search : "nguyen ngoc thai", src : "./Image/AvatarFinal.png", name: "Thái_Team 2"},
    {search : "le minh hoang", src : "./Image/AvatarFinal.png", name: "Hoàng_Team 2"},
    {search : "nguyen viet hung", src : "./Image/AvatarFinal.png", name: "Hưng_Team 2"},
    {search : "vu thanh long", src : "./Image/AvatarFinal.png", name: "Long_Team 2"},
    {search : "le thanh dai", src : "./Image/AvatarFinal.png", name: "Đại_Team 2"},
    {search : "nguyen van trong", src : "./Image/AvatarFinal.png", name: "Trọng_Team 2"},
    {search : "do hai long", src : "./Image/AvatarFinal.png", name: "Long_Team 2"},
    {search : "nguyen minh hieu", src : "./Image/AvatarFinal.png", name: "Hiếu_Team 2"},
    {search : "dang thi thanh truc", src : "./Image/AvatarFinal.png", name: "Trúc_Team 3"},
    {search : "nguyen khanh linh", src : "./Image/AvatarFinal.png", name: "Linh_Team 3"},
    {search : "khuong vu tram anh", src : "./Image/AvatarFinal.png", name: "Anh_Team 3"},
    {search : "hoang nhat minh", src : "./Image/AvatarFinal.png", name: "Minh_Team 3"},
    {search : "pham van son duong", src : "./Image/AvatarFinal.png", name: "Dương_Team 3"},
    {search : "tran quang minh", src : "./Image/AvatarFinal.png", name: "Minh_Team 3"},
    {search : "nguyen ba phi hung", src : "./Image/AvatarFinal.png", name: "Hùng_Team 3"},
    {search : "tran khanh phuong", src : "./Image/AvatarFinal.png", name: "Phương_Team 3"},
    {search : "dam quang hung", src : "./Image/AvatarFinal.png", name: "Hùng_Team 3"},
    {search : "le anh nhat", src : "./Image/AvatarFinal.png", name: "Nhật_Team 3"},
    {search : "nguyen ngoc linh", src : "./Image/AvatarFinal.png", name: "Linh_Team 4"},
    {search : "vu mai phuong uyen", src : "./Image/AvatarFinal.png", name: "UYÊN_Team 4"},
    {search : "le hai van", src : "./Image/AvatarFinal.png", name: "Vân_Team 4"},
    {search : "nguyen dong hung", src : "./Image/AvatarFinal.png", name: "Hưng_Team 4"},
    {search : "nguyen doan ngoc minh", src : "./Image/AvatarFinal.png", name: "Minh_Team 4"},
    {search : "ta quang chien", src : "./Image/AvatarFinal.png", name: "Chiến_Team 4"},
    {search : "le hoang ngoc", src : "./Image/AvatarFinal.png", name: "Ngọc_Team 4"},
    {search : "nguyen dinh phuong", src : "./Image/AvatarFinal.png", name: "Phương_Team 4"},
    {search : "tran quang duy", src : "./Image/AvatarFinal.png", name: "Duy_Team 4"},
    {search : "nguyen duy hung", src : "./Image/AvatarFinal.png", name: "Hùng_Team 4"},
    {search : "cao thi phuong anh", src : "./Image/AvatarFinal.png", name: "Anh_Team 5"},
    {search : "nguyen thi oanh", src : "./Image/AvatarFinal.png", name: "Oanh_Team 5"},
    {search : "nguyen viet ha", src : "./Image/AvatarFinal.png", name: "Hà_Team 5"},
    {search : "cao thanh trung", src : "./Image/AvatarFinal.png", name: "Trung_Team 5"},
    {search : "tran manh dung", src : "./Image/AvatarFinal.png", name: "Dũng_Team 5"},
    {search : "nguyen cong tuan minh", src : "./Image/AvatarFinal.png", name: "Minh_Team 5"},
    {search : "dinh xuan loc", src : "./Image/AvatarFinal.png", name: "Lộc_Team 5"},
    {search : "pham minh hai", src : "./Image/AvatarFinal.png", name: "Hải_Team 5"},
    {search : "le duc lam", src : "./Image/AvatarFinal.png", name: "Lâm_Team 5"},
    {search : "nguyen hoang trung", src : "./Image/AvatarFinal.png", name: "Trung_Team 5"},
    {search : "ngo thao huong", src : "./Image/AvatarFinal.png", name: "Hương_Team 6"},
    {search : "tran phuong linh", src : "./Image/AvatarFinal.png", name: "Linh_Team 6"},
    {search : "tran thu thuy", src : "./Image/AvatarFinal.png", name: "Thủy_Team 6"},
    {search : "le thanh binh", src : "./Image/AvatarFinal.png", name: "Bình_Team 6"},
    {search : "nguyen anh tu", src : "./Image/AvatarFinal.png", name: "Tú_Team 6"},
    {search : "quach manh cuong", src : "./Image/AvatarFinal.png", name: "Cường_Team 6"},
    {search : "ho duy phuong", src : "./Image/AvatarFinal.png", name: "Phương_Team 6"},
    {search : "nguyen minh hoang", src : "./Image/AvatarFinal.png", name: "Hoàng_Team 6"},
    {search : "nguyen duc giang", src : "./Image/AvatarFinal.png", name: "Giang_Team 6"},
    {search : "pham van manh", src : "./Image/AvatarFinal.png", name: "Mạnh_Team 6"},
    {search : "hoang bui que anh", src : "./Image/AvatarFinal.png", name: "Anh_Team 7"},
    {search : "pham khanh linh", src : "./Image/AvatarFinal.png", name: "Linh_Team 7"},
    {search : "pham duc thanh", src : "./Image/AvatarFinal.png", name: "Thành_Team 7"},
    {search : "hoang phi hung", src : "./Image/AvatarFinal.png", name: "Hùng_Team 7"},
    {search : "nguyen tien dat", src : "./Image/AvatarFinal.png", name: "Đạt_Team 7"},
    {search : "hoang duong khoi nguyen", src : "./Image/AvatarFinal.png", name: "Nguyên_Team 7"},
    {search : "doan huu manh", src : "./Image/AvatarFinal.png", name: "Mạnh_Team 7"},
    {search : "le duy linh", src : "./Image/AvatarFinal.png", name: "Linh_Team 7"},
    {search : "nguyen tuan anh", src : "./Image/AvatarFinal.png", name: "Anh_Team 7"},
    {search : "nguyen duc anh", src : "./Image/AvatarFinal.png", name: "Anh_Team 7"},
    {search : "tran dieu anh", src : "./Image/AvatarFinal.png", name: "Anh_Team 8"},
    {search : "nguyen thi hong ha", src : "./Image/AvatarFinal.png", name: "Hà_Team 8"},
    {search : "nguyen thi thanh ngoc", src : "./Image/AvatarFinal.png", name: "Ngọc_Team 8"},
    {search : "nguyen vu thanh tung", src : "./Image/AvatarFinal.png", name: "Tùng_Team 8"},
    {search : "tran tuan anh", src : "./Image/AvatarFinal.png", name: "Anh_Team 8"},
    {search : "nguyen minh quang", src : "./Image/AvatarFinal.png", name: "Quang_Team 8"},
    {search : "ha le hoang bao", src : "./Image/AvatarFinal.png", name: "Bảo_Team 8"},
    {search : "vu dinh nam", src : "./Image/AvatarFinal.png", name: "Nam_Team 8"},
    {search : "nguyen truong thanh", src : "./Image/AvatarFinal.png", name: "Thành_Team 8"},
    {search : "nguyen khoa dang", src : "./Image/AvatarFinal.png", name: "Đăng_Team 8"},
    {search : "le minh chau", src : "./Image/AvatarFinal.png", name: "Châu_Team 9"},
    {search : "nguyen thi thanh thuy", src : "./Image/AvatarFinal.png", name: "Thuỷ_Team 9"},
    {search : "tran ha phuong", src : "./Image/AvatarFinal.png", name: "Phương_Team 9"},
    {search : "nguyen hoang hao", src : "./Image/AvatarFinal.png", name: "Hào_Team 9"},
    {search : "lai duc thang", src : "./Image/AvatarFinal.png", name: "Thắng_Team 9"},
    {search : "chu ngoc vuong", src : "./Image/AvatarFinal.png", name: "Vượng_Team 9"},
    {search : "vu dai minh", src : "./Image/AvatarFinal.png", name: "Minh_Team 9"},
    {search : "nguyen tien thong", src : "./Image/AvatarFinal.png", name: "Thông_Team 9"},
    {search : "nguyen mai hieu", src : "./Image/AvatarFinal.png", name: "Hiếu_Team 9"},
    {search : "to thanh tung", src : "./Image/AvatarFinal.png", name: "Tùng_Team 9"},
    {search : "nguyen phuong linh", src : "./Image/AvatarFinal.png", name: "Linh_Team 10"},
    {search : "bui thi huong giang", src : "./Image/AvatarFinal.png", name: "Giang_Team 10"},
    {search : "trinh thai linh", src : "./Image/AvatarFinal.png", name: "Linh_Team 10"},
    {search : "nguyen huy thai", src : "./Image/AvatarFinal.png", name: "Thái_Team 10"},
    {search : "do dang quyen", src : "./Image/AvatarFinal.png", name: "Quyền_Team 10"},
    {search : "vu viet anh", src : "./Image/AvatarFinal.png", name: "Anh_Team 10"},
    {search : "nguyen tan dung", src : "./Image/AvatarFinal.png", name: "Dũng_Team 10"},
    {search : "nguyen nhat le", src : "./Image/AvatarFinal.png", name: "Lê_Team 10"},
    {search : "truong tan thanh", src : "./Image/AvatarFinal.png", name: "Thành_Team 10"},
    {search : "nguyen xuan hiep", src : "./Image/AvatarFinal.png", name: "Hiệp_Team 10"},
    {search : "nguyen thi ngoc minh", src : "./Image/AvatarFinal.png", name: "Minh_Team 11"},
    {search : "pham thu trang", src : "./Image/AvatarFinal.png", name: "Trang_Team 11"},
    {search : "dang vu quynh huong", src : "./Image/AvatarFinal.png", name: "Hương_Team 11"},
    {search : "le tien vu", src : "./Image/AvatarFinal.png", name: "Vũ_Team 11"},
    {search : "nguyen minh tuan", src : "./Image/AvatarFinal.png", name: "Tuấn_Team 11"},
    {search : "pham minh quang", src : "./Image/AvatarFinal.png", name: "Quang_Team 11"},
    {search : "do quang huy", src : "./Image/AvatarFinal.png", name: "Huy_Team 11"},
    {search : "cao viet long", src : "./Image/AvatarFinal.png", name: "Long_Team 11"},
    {search : "nguyen trong thinh", src : "./Image/AvatarFinal.png", name: "Thịnh_Team 11"},
    {search : "nguyen duc tan", src : "./Image/AvatarFinal.png", name: "Tân_Team 11"},
    {search : "ho thu giang", src : "./Image/AvatarFinal.png", name: "Giang_Team 12"},
    {search : "nguyen ngoc huong thao", src : "./Image/AvatarFinal.png", name: "Thảo_Team 12"},
    {search : "nguyen yen thanh", src : "./Image/AvatarFinal.png", name: "Thanh_Team 12"},
    {search : "dang minh khoi", src : "./Image/AvatarFinal.png", name: "Khôi_Team 12"},
    {search : "nguyen cong", src : "./Image/AvatarFinal.png", name: "Công_Team 12"},
    {search : "nguyen van doanh", src : "./Image/AvatarFinal.png", name: "Doanh_Team 12"},
    {search : "do minh quan", src : "./Image/AvatarFinal.png", name: "Quân_Team 12"},
    {search : "do nhu hoang nam", src : "./Image/AvatarFinal.png", name: "Nam_Team 12"},
    {search : "bui duc hai", src : "./Image/AvatarFinal.png", name: "Hải_Team 12"},
    {search : "nguyen minh duc", src : "./Image/AvatarFinal.png", name: "Đức_Team 12"},
    

]
var dataCard = [
    {search : "soi", src : "./Image/Soi.PNG", name: "Sói"},
    {search : "soinguyen", src : "./Image/SoiNguyen.png", name: "Sói Nguyền"},
    {search : "baove", src : "./Image/Bao ve.PNG", name: "Bảo Vệ"},
    {search : "cupid", src : "./Image/Cupi.PNG", name: "Cupid"},
    {search : "thosan", src : "./Image/Tho san.PNG", name: "Thợ Săn"},
    {search : "tientri", src : "./Image/Tien Tri.PNG", name: "Tiên Tri"},
    {search : "phuthuy", src : "./Image/Phu thuyu.PNG", name: "Phù Thủy"},
    {search : "dan", src : "./Image/Dan lang.PNG", name: "Dân Làng"},
    
]
var CurPlay = []
var CurCard = []
var PlayerWithWhatCard = []
var HTMLimgPlayer = document.querySelectorAll("[data-divPlayer]")
var HTMLimgCard = document.querySelectorAll("[data-card]")
function submitFormForName() {
    let x = document.forms["formForName"]["fname"].value.toLowerCase()
    document.forms["formForName"]["fname"].value = ''
    if(CurPlay.length == 12){
        alert("Enough people to play")
        return false
    }
    for(let i = 0; i < CurPlay.length; ++i){
        if(dataMember[CurPlay[i]].search == x){
            alert(x + " still play")
            return false
        }
    }
    var haveAns = 0
    for(let i = 0; i < dataMember.length; ++i){
        if(dataMember[i].search == x){
            CurPlay.push(i)
            haveAns = 1
            makeImageInHTMLPlayer(i)
            break
        }
    }
    if(haveAns == 0){
        alert("Not found " + x)
        return false
    }
}

function submitFormForCard() {
    let x = document.forms["formForCard"]["fname"].value.toLowerCase()
    document.forms["formForCard"]["fname"].value = ''
    if(CurCard.length == 12){
        alert("Enough card to play")
        return false
    }
    var haveAns = 0
    for(let i = 0; i < dataCard.length; ++i){
        if(dataCard[i].search == x){
            CurCard.push(i)
            haveAns = 1
            makeImageInHTMLCard(i)
            break
        }
    }
    if(haveAns == 0){
        alert("Not found " + x)
        return false
    }
}


function makeImageInHTMLPlayer(i){
    HTMLimgPlayer[CurPlay.length - 1].innerHTML = "<img class=\"rounded-circle\" data-player src=\"" + dataMember[i].src + "\"><h5>" + (CurPlay.length - 1) + ":" + dataMember[i].name + "</h5>"
    HTMLimgPlayer[CurPlay.length - 1].style.opacity = 1

}
function makeImageInHTMLCard(i){
    HTMLimgCard[CurCard.length - 1].innerHTML = "<img class=\"img-thumbnail\" src=\"" + dataCard[i].src + "\">"
    HTMLimgCard[CurCard.length - 1].style.opacity = 1;
}

for(let i = 0; i < HTMLimgPlayer.length; ++i){
    HTMLimgPlayer[i].addEventListener("dblclick", () => {
        if(HTMLimgPlayer[i].innerHTML == '') return
        HTMLimgPlayer[i].innerHTML = ''
        CurPlay.splice(i, 1)
        for(let j = i; j < 11; ++j){
            var indexH5 = HTMLimgPlayer[j + 1].innerHTML.indexOf("<h5>")
            var indexTwoDot = HTMLimgPlayer[j + 1].innerHTML.indexOf(":")
            if(indexH5 == -1 || indexTwoDot == -1){
                HTMLimgPlayer[j].innerHTML = '';
                break;
            }
            var fi = HTMLimgPlayer[j + 1].innerHTML.substring(0, indexH5 + 4)
            var se = HTMLimgPlayer[j + 1].innerHTML.substring(indexTwoDot, HTMLimgPlayer[j + 1].innerHTML.length)
            HTMLimgPlayer[j].innerHTML = fi + j + se
        }
        HTMLimgPlayer[11].innerHTML = ''
        return
    })
    HTMLimgPlayer[i].addEventListener("click", () => {
        if(HTMLimgPlayer[i].innerHTML == '') return
        HTMLimgPlayer[i].style.opacity = 1.3 - HTMLimgPlayer[i].style.opacity
    })
}

for(let i = 0; i < HTMLimgCard.length; ++i){
    HTMLimgCard[i].addEventListener("dblclick", () => {
        if(HTMLimgCard[i].innerHTML == '') return
        HTMLimgCard[i].innerHTML = ''
        CurCard.splice(i, 1)
        for(let j = i; j < 11; ++j)
            HTMLimgCard[j].innerHTML = HTMLimgCard[j + 1].innerHTML
        HTMLimgCard[11].innerHTML = ''
        return
    })
    HTMLimgCard[i].addEventListener("click", () => {
        if(HTMLimgCard[i].innerHTML == '') return
        HTMLimgCard[i].style.opacity = 1.3 - HTMLimgCard[i].style.opacity
        return
    })
}

var slideshow = 0
var start = 0
var fixedSizePlayer
HTMLslideshow = document.querySelector("[data-slideshow]")
function addImagetToSlideShow(i){
    HTMLslideshow.innerHTML = "<img class=\"rounded-circle\" data-player src=\"" + dataMember[CurPlay[i]].src + "\">"
    HTMLslideshow.innerHTML += "<img class=\"img-thumbnail\" data-player src=\"" + dataCard[CurCard[PlayerWithWhatCard[i].id]].src + "\">"
    HTMLslideshow.innerHTML += "<h3>" + dataMember[CurPlay[i]].name + " - " + dataCard[CurCard[PlayerWithWhatCard[i].id]].name + "</h3>"
}
function startGame(){
    if(CurPlay.length != CurCard.length){
        alert("number of players are not equal number of roles")
        return
    }
    slideshow = 0
    start = 1
    PlayerWithWhatCard = []
    fixedSizePlayer = CurPlay.length
    for(let i = 0; i < fixedSizePlayer; ++i)
        PlayerWithWhatCard.push({id: i, valueRandom: Math.random() * 100000})
    PlayerWithWhatCard.sort((a, b) => (a.valueRandom < b.valueRandom ? -1 : 1))
    console.log(PlayerWithWhatCard)
    addImagetToSlideShow(0)
}
document.addEventListener("keydown", (event) => {
    if(start == 0) return
    if(event.keyCode == 39){ //arrowright
        if(slideshow == fixedSizePlayer) return;
        slideshow++;
        if(slideshow == fixedSizePlayer) HTMLslideshow.innerHTML = ''
        else addImagetToSlideShow(slideshow)
    }
    if(event.keyCode == 37){
        if(slideshow == 0) return;
        slideshow--;
        addImagetToSlideShow(slideshow)
    }
})

function autocompleteMatch(input) {
    var term = [];
    for (let i = 0; i < dataMember.length; i++) {
        if(dataMember[i].search.includes(input) == true) term.push(dataMember[i].search)
    }
    return term;
  }
function showResults(val) {
    res = document.getElementById("result");
    res.innerHTML = '';
    let list = '';
    if(val == '') return;
    let terms = autocompleteMatch(val);
    for (let i = 0; i < terms.length; i++) {
      list += '<li onclick = "takeThisResult(this.innerHTML)">' + terms[i] + '</li>';
    }
    res.innerHTML = '<ul>' + list + '</ul>';
}

function takeThisResult(value){
    res = document.getElementById("inputPlayer");
    res.value = value;
    res = document.getElementById("result");
    res.innerHTML = '';
}