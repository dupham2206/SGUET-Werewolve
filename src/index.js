var dataMember = [
    {search : "haivans10", src : "./Image/haivan.png", name: "Hải Vân" },
    {search : "kieuanhs10", src : "./Image/kieuanh.png", name: "Kiều Anh" },
    {search : "ductans10", src : "./Image/ductan.png", name: "Đức Tân" },
    {search : "vananhs10", src : "./Image/vananh.png", name: "Vân Anh" },
    {search : "danghais10", src : "./Image/danghai.png", name: "Đăng Hải" },
    {search : "quangduys10", src : "./Image/quangduy.png", name: "Quang Duy" },
    {search : "haanhs10", src : "./Image/haanh.png", name: "Hà Anh" },
    {search : "ngoclinhs10", src : "./Image/ngoclinh.png", name: "Ngọc Linh" },
    {search : "nguyencongs10", src : "./Image/nguyencong.png", name: "Nguyễn Công" },
    {search : "ngocvuongs10", src : "./Image/ngocvuong.png", name: "Ngọc Vượng" },
    {search : "dieunhats10", src : "./Image/dieunhat.png", name: "Diệu Nhật" },
    {search : "duychiens10", src : "./Image/duychien.png", name: "Duy Chiến" },
    {search : "minhquangs10", src : "./Image/minhquang.png", name: "Minh Quang" },
    {search : "phihungs10", src : "./Image/phihung.png", name: "Phi Hùng" },
    {search : "khanhlinhs10", src : "./Image/khanhlinh.png", name: "Khánh Linh" },
    {search : "tiendats10", src : "./Image/tiendat.png", name: "Tiến Đạt" },
    {search : "minhhais10", src : "./Image/minhhai.png", name: "Minh Hải" },
    {search : "huyhieus10", src : "./Image/huyhieu.png", name: "Huy Hiệu" },
    {search : "myles10", src : "./Image/myle.png", name: "Mỹ Lệ" },
    {search : "xuanbachs10", src : "./Image/phamxuanbach.png", name: "Xuân Bách" },
    {search : "vanmanhs10", src : "./Image/vanmanh.png", name: "Văn Mạnh" },
    {search : "huythais10", src : "./Image/huythai.png", name: "Huy Thái" },
    {search : "hoangyens10", src : "./Image/hoangyen.png", name: "Hoàng Yến" },
    {search : "dieutrucs10", src : "./Image/dieutruc.png", name: "Diệu Trúc" },
    {search : "linhchis10", src : "./Image/linhchi.png", name: "Linh Chi" },
    {search : "hanhuyens10", src : "./Image/hanhuyen.png", name: "Hạnh Uyên" },
    {search : "ducdungs10", src : "./Image/ducdung.png", name: "Đức Dũng" },
    {search : "hongquans10", src : "./Image/hongquan.png", name: "Hồng Quân" },
    {search : "trungdungs10", src : "./Image/trungdung.png", name: "Trung Dũng" },
    {search : "huonggiangs10", src : "./Image/huonggiang.png", name: "Hương Giang" },
    {search : "honghas10", src : "./Image/hongha.png", name: "Hồng Hà" },
    {search : "hieutrungs10", src : "./Image/hieutrung.png", name: "Hiếu Trung" },
    {search : "ducanhs10", src : "./Image/ducanh.png", name: "Đức Anh" },
    {search : "phuonguyens10", src : "./Image/phuonguyen.png", name: "Mai Uyên" },
    {search : "ngocanhs10", src : "./Image/ngocanh.png", name: "Ngọc Ánh" },
    {search : "hoangngocs10", src : "./Image/hoangngoc.png", name: "Hoàng Ngọc" },
    {search : "thioanhs10", src : "./Image/thioanh.png", name: "Thị Oanh" },
    {search : "quangvinhs10", src : "./Image/quangvinh.png", name: "Quang Vinh" },
    {search : "thanhtungs10", src : "./Image/thanhtung.png", name: "Thanh Tùng" },
    {search : "trongthinhs10", src : "./Image/trongthinh.png", name: "Trọng Thịnh" },
    {search : "daiminhs10", src : "./Image/daiminh.png", name: "Đại Minh" },
    {search : "quocdats10", src : "./Image/quocdat.png", name: "Quốc Đạt" },
    {search : "dieuquynhs9", src : "./Image/Diệu Quỳnh.png", name: "Diệu Quỳnh"},
    {search : "tiendus9", src : "./Image/Du Phạm.jpg", name: "Du Phạm"},
    {search : "hoangtrungs9", src : "./Image/Hoàng Trung.jpg", name: "Hoàng Trung"},
    {search : "vanchiens9", src : "./Image/Lê Chiến.jpg", name: "Lê Chiến"},
    {search : "minhtrangs9", src : "./Image/Minh Trang.jpg", name: "Minh Trang"},
    {search : "xuanbachs8", src : "./Image/Ngô Bách.jpg", name: "Xuân Bách"},
    {search : "thanhthaos8", src : "./Image/Thanh Thảo.jpg", name: "Thanh Thảo"},
    {search : "tramys9", src : "./Image/Trà My.jpg", name: "Trà My"},
    {search : "trunghieus8", src : "./Image/Trung Hiếuu.jpg", name: "Trung Hiếu S8"},
    {search : "trunghieus9", src : "./Image/Trung Hiếu.JPG", name: "Trung Hiếu S9"},
    {search : "xuanlocs9", src : "./Image/Xuân Lộc.jpg", name: "Xuân Lộc"},
    {search : "utloans8", src : "./Image/UtLoan.png", name: "Loan Bùi"},
    {search : "ngoctams8", src : "./Image/TTTam.png", name: "Ngọc Tâm"},
    {search : "thibinhs8", src : "./Image/binhdang.png", name: "Bình Đặng"},
    {search : "minhbinhs7", src : "./Image/luke.png", name: "Luke Shrek"},
    {search : "vietdungs8", src : "./Image/npvd.png", name: "Việt Dũng"},
    {search : "minhhongs8", src : "./Image/lmh.png", name: "Minh Hồng"},
    {search : "thixuans7", src : "./Image/xuannguyen.png", name: "Xuân Nguyễn"},
    {search : "tiendungs4", src : "./Image/thaidung.png", name: "Thái Dũng"},
    {search : "manhhungs9", src : "./Image/canmanhhung.jpg", name: "Cấn Hùng"},
    {search : "thaihuys9", src : "./Image/dangthaihuy.jpg", name: "Huy Đặng"},
    {search : "huutungs8", src : "./Image/hoanghuutung.jpg", name: "Hữu Tùng"},
    {search : "trungphongs7", src : "./Image/hoangtrungphong.jpg", name: "Trung Phong"},
    {search : "minhducs9", src : "./Image/leminhduc.png", name: "Lê Minh Đức"},
    {search : "minhtris8", src : "./Image/nguyenminhtri.png", name: "Minh Trí"},
    {search : "tanminhs9", src : "./Image/nguyentanminh.jpg", name: "Tấn Minh"},
    {search : "thanhtams6", src : "./Image/nguyenthanhtam.jpg", name: "Thanh Tâm"},
    {search : "lanhuongs8", src : "./Image/nguyenthilanhuong.jpg", name: "Lan Hương"},
    {search : "minhnguyets7", src : "./Image/nguyenthiminhnguyet.jpg", name: "Minh Nguyệt"},
    {search : "thuphuongs9", src : "./Image/nguyenthithuphuong.png", name: "Phương 9,25"},
    {search : "congchinhs9", src : "./Image/phamcongchinh.jpg", name: "Công Chính"},
    {search : "hungcuongs9", src : "./Image/thanhungcuong.jpg", name: "Hùng Cường"},
    {search : "danghuys9", src : "./Image/tongdanghuy.jpg", name: "Huy Tống"},
    {search : "duytungs7", src : "./Image/tranduytung.jpg", name: "Duy Tùng"},
    {search : "hoanglans9", src : "./Image/trannguyenhoanglan.jpg", name: "Hoàng Lan"},
    {search : "giahuys8", src : "./Image/truonggiahuy.jpg", name: "Gia Huy"},
    {search : "tuananhs7", src : "./Image/buituananh.png", name: "B.Tuấn Anh"},
    {search : "maitrangs9", src : "./Image/maitrang.png", name: "Mai Trang"},
    {search : "thuyquynhs9", src : "./Image/thuyquynh.png", name: "Thúy Quỳnh"},
    {search : "ducngocs7", src : "./Image/tranducngoc.png", name: "Trần Ngọc"},
    {search : "tuankiets8", src : "./Image/letuankiet.png", name: "Kiệt Phương"},
    {search : "tuananhs8", src : "./Image/ngta.png", name: "N.Tuấn Anh"},
    {search : "thienthanhs9", src : "./Image/thienthanh.png", name: "Thiên Thành"},
    {search : "thilys5", src : "./Image/lymai.png", name: "Lý Mai"},
    {search : "hienans9", src : "./Image/hienan.png", name: "Hiền An"},
    {search : "vietanhs9", src : "./Image/vietanh.png", name: "Việt Anh"},
    {search : "vanhuys7", src : "./Image/nguyenvanhuy.png", name: "Văn Huy"},
    {search : "trungcuongs8", src : "./Image/dangtrungcuong.png", name: "Trung Cương"},
    {search : "trongdangs9", src : "./Image/daotrongdang.png", name: "Đăng Đào"},
    {search : "tiendungs9", src : "./Image/phamtiendung.png", name: "Dũng Phạm"},
    {search : "thuthuys8", src : "./Image/thuytran.png", name: "Thủy Trần"},
    {search : "kimthuans6", src : "./Image/vukimthuan.png", name: "Vũ Kim Thuận"},
    {search : "phuongngas9", src : "./Image/phuongnga.png", name: "Phương Nga"},
    {search : "vanhungs9", src : "./Image/vanhung.png", name: "Văn Hưng"},
    {search : "quananhs6", src : "./Image/quananh.png", name: "Quân Anh"},
    {search : "dinhminhs9", src : "./Image/dinhminh.png", name: "Đình Minh"},
    {search : "hoanglongs7", src : "./Image/hoanglong.png", name: "Hoàng Long"},
    {search : "haianhs9", src : "./Image/haianh.png", name: "Hải Anh"},
    {search : "thitrangs8", src : "./Image/ngothitrang.png", name: "Trang Ngô"},
    {search : "tichphucs6", src : "./Image/hoangtichphuc.png", name: "Tích Phúc"},
    {search : "ngocphuongs8", src : "./Image/ngocphuong.png", name: "Ngọc Phượng"},
    {search : "baovuongs6", src : "./Image/dinhbaovuong.png", name: "Bảo Vương" },
    {search : "sontungs6", src : "./Image/dangsontung.png", name: "Sơn Tùng" },
    {search : "nganhas8", src : "./Image/duongnganha.png", name: "Ngân Hà" },
    {search : "huemys8", src : "./Image/kimthihuemy.png", name: "Huệ Mỹ" },
    {search : "duccuongs9", src : "./Image/nguyenduccuong.png", name: "Ken" },
    {search : "tuanminhs9", src : "./Image/letuanminh.png", name: "Tuấn Minh" },
    {search : "minhhangs9", src : "./Image/minghang.png", name: "Minh Hằng" },
    {search : "minhanhs9", src : "./Image/npminhanh.png", name: "Minh Anh" },
    {search : "thuyduongs9", src : "./Image/thuyduong.png", name: "Thùy Dương" },
    {search : "thihas6", src : "./Image/phamthiha.png", name: "Hà Min" },
    {search : "thiphuongs7", src : "./Image/lethiphuong.png", name: "Lê Phương" },
    {search : "tienthanhs7", src : "./Image/dotienthanh.png", name: "Tiến Thành" },
    {search : "quocdungs8", src : "./Image/vanquocdung.png", name: "Văn Dũng" },
    {search : "thanhbongs8", src : "./Image/thanhbong.png", name: "Thành Bổng" },
    {search : "minhthais8", src : "./Image/thainguyen.png", name: "Thái Nguyễn" },
    {search : "gianguyens6", src : "./Image/ngogianguyen.png", name: "Gia Nguyên" },
    {search : "phucmanhs7", src : "./Image/phucmanh.png", name: "Phúc Mạnh" },
    {search : "thanhvans7", src : "./Image/thanhvan.png", name: "Thanh Vân" },
    {search : "thihiens8", src : "./Image/hienpham.png", name: "Hiền Phạm" },
    {search : "minhbaos8", src : "./Image/phamminhbao.png", name: "Minh Bảo" },
    {search : "haiyens9", src : "./Image/haiyen.png", name: "Hải Yến" },
    {search : "duchuans4", src : "./Image/phanduchuan.png", name: "Đức Huân" },    
    {search : "nhatquangs5", src : "./Image/thnq.png", name: "Nhật Quang" },
    {search : "nhatduongs7", src : "./Image/phamnhatduong.png", name: "Nhật Dương" },
    {search : "quanglinhs5", src : "./Image/quanglinh.png", name: "Quang Linh" },


    

]
var dataCard = [
    {search : "soi", src : "./Image/Soi.PNG", name: "Sói"},
    {search : "soinguyen", src : "./Image/SoiNguyen.png", name: "Sói Nguyền"},
    {search : "baove", src : "./Image/Bao ve.PNG", name: "Bảo Vệ"},
    {search : "cupid", src : "./Image/Cupi.PNG", name: "Cupid"},
    {search : "thosan", src : "./Image/Tho san.PNG", name: "Thợ Săn"},
    {search : "tientri", src : "./Image/Tien Tri.PNG", name: "Tiên Tri"},
    {search : "phuthuy", src : "./Image/Phu thuyu.PNG", name: "Phù Thủy"},
    {search : "dan", src : "./Image/Dan lang.PNG", name: "Dân Làng"},
    
]
var CurPlay = []
var CurCard = []
var PlayerWithWhatCard = []
var HTMLimgPlayer = document.querySelectorAll("[data-divPlayer]")
var HTMLimgCard = document.querySelectorAll("[data-card]")
function submitFormForName() {
    let x = document.forms["formForName"]["fname"].value.toLowerCase()
    document.forms["formForName"]["fname"].value = ''
    if(CurPlay.length == 18){
        alert("Enough people to play")
        return false
    }
    for(let i = 0; i < CurPlay.length; ++i){
        if(dataMember[CurPlay[i]].search == x){
            alert(x + " still play")
            return false
        }
    }
    var haveAns = 0
    for(let i = 0; i < dataMember.length; ++i){
        if(dataMember[i].search == x){
            CurPlay.push(i)
            haveAns = 1
            makeImageInHTMLPlayer(i)
            break
        }
    }
    if(haveAns == 0){
        alert("Not found " + x)
        return false
    }
}
//<input type="text" name="fname" placeholder="Some card will be played" required>
function submitFormForCard() {
    let x = document.forms["formForCard"]["fname"].value.toLowerCase()
    document.forms["formForCard"]["fname"].value = ''
    if(CurCard.length == 18){
        alert("Enough card to play")
        return false
    }
    var haveAns = 0
    for(let i = 0; i < dataCard.length; ++i){
        if(dataCard[i].search == x){
            CurCard.push(i)
            haveAns = 1
            makeImageInHTMLCard(i)
            break
        }
    }
    if(haveAns == 0){
        alert("Not found " + x)
        return false
    }
}


function makeImageInHTMLPlayer(i){
    HTMLimgPlayer[CurPlay.length - 1].innerHTML = "<img class=\"rounded-circle\" data-player src=\"" + dataMember[i].src + "\"><h5>" + (CurPlay.length) + ":" + dataMember[i].name + "</h5>"
    HTMLimgPlayer[CurPlay.length - 1].style.opacity = 1

}
function makeImageInHTMLCard(i){
    HTMLimgCard[CurCard.length - 1].innerHTML = "<img class=\"img-thumbnail\" src=\"" + dataCard[i].src + "\">"
    HTMLimgCard[CurCard.length - 1].style.opacity = 1;
}

for(let i = 0; i < HTMLimgPlayer.length; ++i){
    HTMLimgPlayer[i].addEventListener("dblclick", () => {
        if(HTMLimgPlayer[i].innerHTML == '') return
        HTMLimgPlayer[i].innerHTML = ''
        CurPlay.splice(i, 1)
        for(let j = i; j < 17; ++j){
            var indexH5 = HTMLimgPlayer[j + 1].innerHTML.indexOf("<h5>")
            var indexTwoDot = HTMLimgPlayer[j + 1].innerHTML.indexOf(":")
            if(indexH5 == -1 || indexTwoDot == -1){
                HTMLimgPlayer[j].innerHTML = '';
                break;
            }
            var fi = HTMLimgPlayer[j + 1].innerHTML.substring(0, indexH5 + 4)
            var se = HTMLimgPlayer[j + 1].innerHTML.substring(indexTwoDot, HTMLimgPlayer[j + 1].innerHTML.length)
            HTMLimgPlayer[j].innerHTML = fi + j + se
        }
        HTMLimgPlayer[17].innerHTML = ''
        return
    })
    HTMLimgPlayer[i].addEventListener("click", () => {
        if(HTMLimgPlayer[i].innerHTML == '') return
        HTMLimgPlayer[i].style.opacity = 1.3 - HTMLimgPlayer[i].style.opacity
    })
}

for(let i = 0; i < HTMLimgCard.length; ++i){
    HTMLimgCard[i].addEventListener("dblclick", () => {
        if(HTMLimgCard[i].innerHTML == '') return
        HTMLimgCard[i].innerHTML = ''
        CurCard.splice(i, 1)
        for(let j = i; j < 17; ++j)
            HTMLimgCard[j].innerHTML = HTMLimgCard[j + 1].innerHTML
        HTMLimgCard[17].innerHTML = ''
        return
    })
    HTMLimgCard[i].addEventListener("click", () => {
        if(HTMLimgCard[i].innerHTML == '') return
        HTMLimgCard[i].style.opacity = 1.3 - HTMLimgCard[i].style.opacity
        return
    })
}

var slideshow = 0
var start = 0
var fixedSizePlayer
var HTMLslideshow = document.querySelector("[data-slideshow]")
function addImagetToSlideShow(i){
    HTMLslideshow.innerHTML = "<img class=\"rounded-circle\" data-player src=\"" + dataMember[CurPlay[i]].src + "\">"
    HTMLslideshow.innerHTML += "<img class=\"img-thumbnail\" data-player src=\"" + dataCard[CurCard[PlayerWithWhatCard[i].id]].src + "\">"
    HTMLslideshow.innerHTML += "<h3>" + dataMember[CurPlay[i]].name + " - " + dataCard[CurCard[PlayerWithWhatCard[i].id]].name + "</h3>"
}
function startGame(){
    if(CurPlay.length != CurCard.length){
        alert("number of players are not equal number of roles")
        return
    }
    slideshow = 0
    start = 1
    PlayerWithWhatCard = []
    fixedSizePlayer = CurPlay.length
    for(let i = 0; i < fixedSizePlayer; ++i)
        PlayerWithWhatCard.push({id: i, valueRandom: Math.random() * 100000})
    PlayerWithWhatCard.sort((a, b) => (a.valueRandom < b.valueRandom ? -1 : 1))
    console.log(PlayerWithWhatCard)
    addImagetToSlideShow(0)
}
document.addEventListener("keydown", (event) => {
    if(start == 0) return
    if(event.keyCode == 39){ //arrowright
        if(slideshow == fixedSizePlayer) return;
        slideshow++;
        if(slideshow == fixedSizePlayer) HTMLslideshow.innerHTML = ''
        else addImagetToSlideShow(slideshow)
    }
    if(event.keyCode == 37){
        if(slideshow == 0) return;
        slideshow--;
        addImagetToSlideShow(slideshow)
    }
})

function autocompleteMatch(input) {
    var term = [];
    for (let i = 0; i < dataMember.length; i++) {
        if(dataMember[i].search.includes(input) == true) term.push(dataMember[i].search)
    }
    return term;
  }
function showResults(val) {
    res = document.getElementById("result");
    res.innerHTML = '';
    let list = '';
    if(val == '') return;
    let terms = autocompleteMatch(val);
    for (let i = 0; i < terms.length; i++) {
      list += '<li onclick = "takeThisResult(this.innerHTML)">' + terms[i] + '</li>';
    }
    res.innerHTML = '<ul>' + list + '</ul>';
}

function takeThisResult(value){
    res = document.getElementById("inputPlayer");
    res.value = value;
    res = document.getElementById("result");
    res.innerHTML = '';
}

